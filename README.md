# Portfolio Analyzer

[![React](https://img.shields.io/badge/React-18.3.1-blue?logo=react)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.5.3-blue?logo=typescript)](https://www.typescriptlang.org/)
[![N8N](https://img.shields.io/badge/N8N-Workflow-orange?logo=n8n)](https://n8n.io/)
[![Vite](https://img.shields.io/badge/Vite-5.4.1-purple?logo=vite)](https://vitejs.dev/)

A practice MVP of a crypto portfolio analysis platform. This application allows you to connect your crypto wallet, automatically fetch your assets on the BSC network, and view your total asset value in USD with AI analysis.

**Live Demo:** **[https://portfolio-analyzer-0gik.onrender.com](https://portfolio-analyzer-0gik.onrender.com)**
**Persian version of the readme file**

## Screenshots

|                                Home Page                                 |                                     Portfolio Page                                      |
| :----------------------------------------------------------------------: | :-------------------------------------------------------------------------------------: |
| ![_[Home Page Screenshot]_](Frontend/public/screencapture-home-page.png) |   ![_[Portfolio Page Screenshot]_](Frontend/public/screencapture-portfolio-page.png)    |
|                                                                          | [Portfolio Full Page Screenshot](Frontend/public/screencapture-portfolio-full-page.png) |

## Description

This project is an MVP (Minimum Viable Product) of a crypto portfolio analysis platform. By connecting your crypto wallet, you can automatically fetch all your assets on the **BSC network** and see the total value in USD. The platform also displays the percentage and dollar value change of your assets over the past 24 hours. To ensure accuracy, the application automatically filters out potential spam or low-security tokens from the main calculations.

The dashboard features two sections powered by the CoinGecko API: the top 10 assets with the highest price increase and the top 10 with the highest price decrease in the last hour.

A key feature is the AI-driven analysis. Based on your valid assets, the platform sends the data to an **N8N AI Agent**. This agent provides a comprehensive analysis of your portfolio, including investment suggestions. This analysis is generated by a **Gemini 2.0 Flash Lite** model, which processes your asset data along with the latest news from CoinDesk and CryptoPanic.

Additionally, the platform includes a detailed view of all your assets (both valid and non-valid) and a list of your last 10 transactions.

## Core Features

- **Web3 Wallet Connectivity**: Seamlessly connect user wallets using Rainbow Appkit.
- **BSC Network Focus**: The initial version is focused on the Binance Smart Chain.
- **Asset & Transaction Retrieval**: Fetches user assets and transaction history using the Moralis API.
- **Price & Market Data**: Retrieves real-time prices and 24-hour change data from the CoinGecko API.
- **AI-Powered Portfolio Analysis**: Utilizes an N8N backend and Gemini 2.0 model to analyze the user's portfolio based on market data from CoinDesk and CryptoPanic.
- **Spam Token Filtering**: Automatically identifies and excludes spam/low-security tokens from calculations.
- **Top Movers Display**: Shows the top 10 hourly gainers and losers from CoinGecko.

## Technology Stack

- **Frontend**: React.js, TypeScript, Vite, React Router, Framer Motion, Shadcn UI.
- **UI Prototyping**: lovable.dev
- **Backend / Workflow**: N8N
- **External APIs**: Moralis API, CoinGecko API, CoinDesk API, CryptoPanic API, Google AI (Gemini).

## Installation and Setup

To run this project locally, follow these steps:

```bash
git clone https://github.com/amir-mostafa-hs/Portfolio-Analyzer.git
```

### For the Frontend:

1.  Navigate to the Frontend directory:
    ```bash
    cd Frontend
    ```
2.  Install dependencies using pnpm:
    ```bash
    pnpm install
    ```
3.  Create a local environment file by copying the example:
    ```bash
    cp .env.example .env
    ```
4.  Open the `.env` file and add your custom information (API keys, etc.).
5.  Run the development server:
    ```bash
    pnpm dev
    ```
6.  The frontend will be available at `http://localhost:8080`.

### For the Backend (N8N):

1.  Navigate to the Backend directory:
    ```bash
    cd Backend
    ```
2.  Before starting, you can pull the latest n8n image:
    ```bash
    docker pull n8nio/n8n:latest
    ```
3.  Run the n8n instance using Docker Compose:
    ```bash
    docker-compose up -d
    ```
4.  Open `http://localhost:5678/` in your browser and set up your n8n admin account.
5.  Create a new, empty workflow.
6.  From the top-right menu, select "Import from File".
7.  Use the `Portfolio_Analyzer.json` file located in the `Backend` folder to import the AI agent workflow.
8.  **Important**: Inside the n8n UI, you must create and configure credentials for the Webhook, CryptoPanic API, and Gemini API for the workflow to function correctly.
9.  Your N8N webhook endpoint will be: `http://localhost:5678/webhook-test/<your-random-uuid>`

## Deployment

This project can be deployed using [Render.com](http.render.com)'s free tier.

- **Frontend**: Deploy as a **Static Site**. Configure the build command and publish directory according to your Vite setup.
- **Backend (N8N)**: Deploy as a **Web Service** using an **Existing Image**. Use the official `n8nio/n8n` image from Docker Hub.

**Important Note for Render's Free Tier:**
Render's free web services will spin down after 15 minutes of inactivity. For an n8n instance, this means all saved workflows and settings may be lost upon restart. To prevent this, you have two options:

1.  **Cron Job**: Set up a free cron job service (like [cron-job.org](http://cron-job.org)) to send a request to your n8n service every 5-10 minutes to keep it active.
2.  **Persistent Database**: For a more robust solution, create a PostgreSQL database service on Render and configure your n8n service to use it for data persistence. This requires adding database-related environment variables to your n8n service configuration.

## How to Use

1.  To use the application, you need a crypto wallet (e.g., MetaMask, Trust Wallet) with assets on the **BSC network**.
2.  Once you open the application, click the **"Connect Wallet"** button.
3.  Choose your preferred wallet from the list provided by Rainbow Appkit.
4.  After successfully connecting, you will be redirected to the **Portfolio** page, where you will see your asset information and the complete AI analysis.
